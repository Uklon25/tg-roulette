<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>–†—É–ª–µ—Ç–∫–∞ –ø–æ–¥–∞—Ä–∫–æ–≤</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  html, body {
    margin: 0;
    padding: 0;
    background: #121212;
    color: #eee;
    font-family: Arial, sans-serif;
    min-height: 100vh;
    width: 100vw;
    overflow-x: hidden;
  }
  #main-content {
    flex: 1;
    width: 100vw;
    max-width: 430px;
    margin: 0 auto;
    box-sizing: border-box;
    padding-top: 16px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  #profile, #roulette, #inventory {
    width: 100%;
    max-width: 430px;
    box-sizing: border-box;
    padding: 0 8px;
  }
  #wheel {
    background: #222;
    border-radius: 50%;
    box-shadow: 0 0 15px #0f0;
    margin-bottom: 18px;
    width: 95vw;
    max-width: 320px;
    height: 95vw;
    max-height: 320px;
    display: block;
  }
  .pointer {
    width: 0; 
    height: 0; 
    border-left: 20px solid transparent;
    border-right: 20px solid transparent;
    border-bottom: 28px solid #0f0;
    margin-bottom: -13px;
    margin-left: auto;
    margin-right: auto;
    display: block;
    position: relative;
    top: 10px;
    z-index: 2;
  }
  #controls {
    margin-bottom: 12px;
    width: 100%;
    box-sizing: border-box;
    max-width: 340px;
    margin-left: auto;
    margin-right: auto;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  #luckButtons {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 7px;
    margin-bottom: 8px;
  }
  #luckButtons button {
    min-width: 90px;
  }
  button {
    background: #0a0;
    color: #cfc;
    border: none;
    padding: 10px 12px;
    margin: 5px 3px;
    border-radius: 6px;
    font-weight: bold;
    font-size: 1em;
    cursor: pointer;
    transition: background 0.3s ease;
    min-width: 70px;
    box-sizing: border-box;
  }
  button:disabled {
    background: #444;
    cursor: not-allowed;
  }
  #balance {
    font-size: 1.2em;
    margin-bottom: 12px;
    text-align: center;
  }
  #prizeInfo {
    font-size: 1.1em;
    margin-top: 12px;
    min-height: 26px;
    text-align: center;
    word-break: break-word;
  }
  #luckButtons button.active {
    background: #4caf50;
    box-shadow: 0 0 8px #4caf50;
  }
  .bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0; right: 0;
    width: 100vw;
    max-width: 430px;
    margin: 0 auto;
    z-index: 100;
    display: flex;
    justify-content: space-around;
    background: #222;
    border-top: 1px solid #333;
    padding: 0;
    height: 56px;
  }
  .bottom-nav button {
    flex: 1;
    margin: 0 2px;
    font-size: 1.05em;
    padding: 13px 0;
    border-radius: 5px;
    background: #111;
    color: #eee;
    border: none;
    transition: background .25s;
    min-width: 0;
    min-height: 36px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  .bottom-nav button.active {
    background: #0a0;
    color: #fff;
    box-shadow: 0 0 8px #0f0;
  }
  .inventory-list {
    display: flex;
    flex-wrap: wrap;
    gap: 7px;
    margin-top: 10px;
    padding-bottom: 60px;
    justify-content: center;
  }
  .inventory-item {
    background: #232323;
    border-radius: 8px;
    padding: 12px 8px;
    min-width: 100px;
    text-align: center;
    margin: 3px;
    color: #fff;
    font-size: 1em;
    border: 1px solid #333;
    word-break: break-word;
  }
  .profile-info {
    padding: 20px 0 8px 0;
    font-size: 1.1em;
    text-align: center;
    color: #fff;
  }
  .chance-table-title {
    text-align: center;
    font-size: 1.1em;
    margin: 12px 0 3px 0;
    font-weight: bold;
    color: #8cff8c;
    letter-spacing: 1px;
  }
  .chance-table {
    width: 100%;
    max-width: 350px;
    margin: 0 auto 10px auto;
    border-collapse: collapse;
    font-size: 0.98em;
    background: #232323;
    border-radius: 6px;
    overflow: hidden;
  }
  .chance-table th, .chance-table td {
    padding: 5px 4px;
    border: 1px solid #333;
    text-align: center;
  }
  .chance-table th {
    background: #191919;
    color: #9aff9a;
    font-weight: bold;
  }
  .chance-table td {
    color: #eee;
  }
  .chance-table tr:nth-child(even) td {
    background: #181818;
  }
  .chance-table tr:nth-child(odd) td {
    background: #232323;
  }
  @media (max-width: 600px) {
    #main-content, #profile, #roulette, #inventory, .bottom-nav {
      max-width: 100vw;
      min-width: 0;
      padding-left: 0;
      padding-right: 0;
    }
    .inventory-item {
      min-width: 44vw;
      font-size: .99em;
    }
    #controls {
      max-width: 98vw;
    }
    #wheel {
      max-width: 98vw;
      max-height: 98vw;
    }
    .bottom-nav {
      padding: 0;
      height: 54px;
    }
    .bottom-nav button {
      font-size: .97em;
      padding: 10px 0;
    }
    .chance-table {
      font-size: 0.9em;
      max-width: 100vw;
    }
  }
</style>
</head>
<body>

<div id="main-content">
  <div id="profile" style="display:none;">
    <h2>–ü—Ä–æ—Ñ–∏–ª—å</h2>
    <div class="profile-info">
      <div>üë§ –ò–º—è: <span id="username">User</span></div>
      <div>‚≠ê –ë–∞–ª–∞–Ω—Å: <span id="balanceValueProfile">1000</span></div>
      <div id="addStarsBtnWrap" style="margin-top:12px; display:none;">
        <button id="addStarsBtn">+1000 ‚≠ê</button>
      </div>
    </div>
  </div>
  <div id="roulette">
    <h2>–†—É–ª–µ—Ç–∫–∞ –ø–æ–¥–∞—Ä–∫–æ–≤</h2>
    <div id="balance">–ë–∞–ª–∞–Ω—Å: <span id="balanceValue">1000</span> ‚≠ê</div>
    <div class="pointer"></div>
    <canvas id="wheel" width="320" height="320"></canvas>
    <div id="controls">
      <div id="luckButtons">
        <button data-cost="25">–°—Ç–∞–≤–∫–∞ 25 ‚≠ê</button>
        <button data-cost="50">–°—Ç–∞–≤–∫–∞ 50 ‚≠ê</button>
        <button data-cost="100">–°—Ç–∞–≤–∫–∞ 100 ‚≠ê</button>
      </div>
      <div>
        <button id="spinBtn" disabled>–ö—Ä—É—Ç–∏—Ç—å</button>
        <button id="spinAgainBtn" disabled>–ö—Ä—É—Ç–∏—Ç—å –µ—â—ë</button>
        <button id="sellPrizeBtn" disabled>–ü—Ä–æ–¥–∞—Ç—å –ø—Ä–∏–∑</button>
      </div>
    </div>
    <div id="prizeInfo"></div>
    <div class="chance-table-title">–¢–∞–±–ª–∏—Ü–∞ —à–∞–Ω—Å–æ–≤</div>
    <div id="chanceTables"></div>
  </div>
  <div id="inventory" style="display:none;">
    <h2>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h2>
    <div id="inventoryCount" style="color:#eee;font-size:1.07em;margin-bottom:4px;text-align:center;width:100%"></div>
    <div id="inventoryList" class="inventory-list"></div>
  </div>
</div>

<nav class="bottom-nav">
  <button id="navProfile">–ü—Ä–æ—Ñ–∏–ª—å</button>
  <button id="navRoulette" class="active">–†—É–ª–µ—Ç–∫–∞</button>
  <button id="navInventory">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</button>
</nav>

<script>
  // --- –ù–ê–í–ò–ì–ê–¶–ò–Ø ---
  const navBtns = {
    profile: document.getElementById("navProfile"),
    roulette: document.getElementById("navRoulette"),
    inventory: document.getElementById("navInventory"),
  };
  const screens = {
    profile: document.getElementById("profile"),
    roulette: document.getElementById("roulette"),
    inventory: document.getElementById("inventory"),
  };
  function showScreen(screen) {
    for (let k of Object.keys(screens)) {
      screens[k].style.display = (k === screen) ? "" : "none";
      navBtns[k].classList.toggle("active", k === screen);
    }
    if (screen === "profile") updateProfile();
    if (screen === "inventory") { updateInventory(); updateInventoryCount(); }
  }
  navBtns.profile.onclick = () => showScreen("profile");
  navBtns.roulette.onclick = () => showScreen("roulette");
  navBtns.inventory.onclick = () => showScreen("inventory");

  // ------------ –†–£–õ–ï–¢–ö–ê ---------------
  const chances = {
    25: [
      {name: "üß∏ –ú–∏—à–∫–∞", chance: 21.37, price: 15},
      {name: "‚ù§Ô∏è –°–µ—Ä–¥—Ü–µ", chance: 21.37, price: 15},
      {name: "üéÅ –ö–æ—Ä–æ–±–∫–∞", chance: 25, price: 25},
      {name: "üåπ –†–æ–∑–∞", chance: 25, price: 25},
      {name: "üöÄ –†–∞–∫–µ—Ç–∞", chance: 1.21, price: 50},
      {name: "üçæ –®–∞–º–ø–∞–Ω—Å–∫–æ–µ", chance: 1.21, price: 50},
      {name: "üíç –ö–æ–ª—å—Ü–æ", chance: 0.86, price: 100},
      {name: "‚ùå –ü—É—Å—Ç–æ", chance: 4.98, price: 0}
    ],
    50: [
      {name: "üß∏ –ú–∏—à–∫–∞", chance: 8.08, price: 15},
      {name: "‚ù§Ô∏è –°–µ—Ä–¥—Ü–µ", chance: 8.08, price: 15},
      {name: "üéÅ –ö–æ—Ä–æ–±–∫–∞", chance: 13.47, price: 25},
      {name: "üåπ –†–æ–∑–∞", chance: 13.47, price: 25},
      {name: "üíê –ë—É–∫–µ—Ç", chance: 12.5, price: 50},
      {name: "üöÄ –†–∞–∫–µ—Ç–∞", chance: 12.5, price: 50},
      {name: "üçæ –®–∞–º–ø–∞–Ω—Å–∫–æ–µ", chance: 12.5, price: 50},
      {name: "üíç –ö–æ–ª—å—Ü–æ", chance: 1.48, price: 100},
      {name: "üèÜ –ö—É–±–æ–∫", chance: 1.48, price: 100},
      {name: "üéÇ –¢–æ—Ä—Ç", chance: 12.5, price: 50},
      {name: "‚ùå –ü—É—Å—Ç–æ", chance: 4.94, price: 0}
    ],
    100: [
      {name: "üß∏ –ú–∏—à–∫–∞", chance: 3.61, price: 15},
      {name: "‚ù§Ô∏è –°–µ—Ä–¥—Ü–µ", chance: 3.61, price: 15},
      {name: "üéÅ –ö–æ—Ä–æ–±–∫–∞", chance: 8.02, price: 25},
      {name: "üåπ –†–æ–∑–∞", chance: 8.02, price: 25},
      {name: "üíê –ë—É–∫–µ—Ç", chance: 8.35, price: 50},
      {name: "üöÄ –†–∞–∫–µ—Ç–∞", chance: 8.35, price: 50},
      {name: "üçæ –®–∞–º–ø–∞–Ω—Å–∫–æ–µ", chance: 8.02, price: 50},
      {name: "üíç –ö–æ–ª—å—Ü–æ", chance: 16, price: 100},
      {name: "üèÜ –ö—É–±–æ–∫", chance: 16, price: 100},
      {name: "üéÇ –¢–æ—Ä—Ç", chance: 7.02, price: 50},
      {name: "üíé –ê–ª–º–∞–∑", chance: 16, price: 100},
      {name: "üéâ –¢–∞–±–ª–∏—á–∫–∞", chance: 4, price: 350},
      {name: "‚ùå –ü—É—Å—Ç–æ", chance: 1, price: 0}
    ]
  };

  let balance = 1000;
  let currentCost = null;
  let spinning = false;
  let currentPrize = null;
  let inventory = [];

  // --- Telegram WebApp User Info ---
  let tgUserId = null;
  let tgUserName = "User";
  if (
    window.Telegram &&
    window.Telegram.WebApp &&
    window.Telegram.WebApp.initDataUnsafe &&
    window.Telegram.WebApp.initDataUnsafe.user
  ) {
    tgUserId = window.Telegram.WebApp.initDataUnsafe.user.id;
    tgUserName = window.Telegram.WebApp.initDataUnsafe.user.first_name || "User";
  }
  document.getElementById("username").textContent = tgUserName;

  // –ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É +1000 —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
  const addStarsBtnWrap = document.getElementById("addStarsBtnWrap");
  if (tgUserId === 6774136020) addStarsBtnWrap.style.display = "";
  else addStarsBtnWrap.style.display = "none";

  function updateProfile() {
    document.getElementById("balanceValueProfile").textContent = balance;
  }

  function updateInventory() {
    const invList = document.getElementById('inventoryList');
    invList.innerHTML = "";
    if (inventory.length === 0) {
      invList.innerHTML = `<div style="color:#888;">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç.</div>`;
      return;
    }
    inventory.forEach(item => {
      let div = document.createElement("div");
      div.className = "inventory-item";
      div.innerHTML = `${item.name}<br><span style="font-size:.9em; color:#aaa;">(${item.price} ‚≠ê)</span>`;
      invList.appendChild(div);
    });
  }
  function updateInventoryCount() {
    document.getElementById('inventoryCount').textContent =
      `üéÅ –ü—Ä–µ–¥–º–µ—Ç–æ–≤ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ: ${inventory.length}`;
  }

  const balanceElem = document.getElementById("balanceValue");
  const prizeInfo = document.getElementById("prizeInfo");
  const luckButtons = [...document.querySelectorAll("#luckButtons button")];
  const spinBtn = document.getElementById("spinBtn");
  const spinAgainBtn = document.getElementById("spinAgainBtn");
  const sellPrizeBtn = document.getElementById("sellPrizeBtn");

  const canvas = document.getElementById("wheel");
  const ctx = canvas.getContext("2d");

  // –î–ª—è –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ canvas –∫ —ç–∫—Ä–∞–Ω—É
  function fitCanvas() {
    let size = Math.min(window.innerWidth * 0.95, 320);
    canvas.width = canvas.height = size;
  }
  fitCanvas();
  window.addEventListener("resize", () => { fitCanvas(); drawWheel(); });

  function getWheelGeom() {
    return {
      wheelRadius: canvas.width / 2 - 10,
      centerX: canvas.width / 2,
      centerY: canvas.height / 2
    };
  }

  let currentAngle = 0;

  function updateBalanceUI() {
    balanceElem.textContent = balance;
    document.getElementById("balanceValueProfile").textContent = balance;
  }

  function updateButtonsState() {
    if (spinning) {
      spinBtn.disabled = true;
      spinAgainBtn.disabled = true;
      sellPrizeBtn.disabled = true;
      luckButtons.forEach(btn => btn.disabled = true);
      return;
    }
    spinBtn.disabled = !currentCost || balance < currentCost;
    spinAgainBtn.disabled = !currentPrize || balance < currentCost;
    sellPrizeBtn.disabled = !currentPrize;
    luckButtons.forEach(btn => btn.disabled = spinning);
  }

  function drawWheel(highlightSegmentIdx = null) {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    if (!currentCost) {
      ctx.fillStyle = "#555";
      ctx.font = (canvas.width * 0.07 | 0) + "px Arial";
      ctx.textAlign = "center";
      ctx.fillText("–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∞–≤–∫—É", canvas.width / 2, canvas.height / 2);
      return;
    }
    const segments = chances[currentCost];
    let startAngle = currentAngle;
    const { wheelRadius, centerX, centerY } = getWheelGeom();

    for (let i = 0; i < segments.length; ++i) {
      const seg = segments[i];
      let segmentAngle = (seg.chance / 100) * 2 * Math.PI;

      ctx.beginPath();
      ctx.moveTo(centerX, centerY);
      ctx.arc(centerX, centerY, wheelRadius, startAngle, startAngle + segmentAngle);
      ctx.closePath();
      // –ß–µ—Ä–µ–¥—É–µ–º —Ü–≤–µ—Ç–∞
      ctx.fillStyle = seg.price === 0 ? "#222" : (i % 2 === 0 ? "#0b0" : "#097c09");
      if (highlightSegmentIdx === i) ctx.fillStyle = "#26e326";
      ctx.fill();
      ctx.strokeStyle = "#000";
      ctx.stroke();

      // –ö–æ—Ä–æ—Ç–∫–∏–π —Ç–µ–∫—Å—Ç, –±–ª–∏–∂–µ –∫ —Ü–µ–Ω—Ç—Ä—É, –ø–æ–≤–µ—Ä–Ω—É—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
      ctx.save();
      ctx.translate(centerX, centerY);
      ctx.rotate(startAngle + segmentAngle / 2 - Math.PI / 2);
      ctx.textAlign = "center";
      ctx.fillStyle = "#fff";
      ctx.font = (canvas.width * 0.058 | 0) + "px Arial";
      ctx.fillText(seg.name, wheelRadius * 0.7, 0);
      ctx.restore();

      startAngle += segmentAngle;
    }
  }

  function getSegmentIndexByPrize(segments, prize) {
    for (let i = 0; i < segments.length; ++i) {
      if (segments[i].name === prize.name && segments[i].price === prize.price) return i;
    }
    return -1;
  }

  function selectPrize() {
    const list = chances[currentCost];
    let rand = Math.random() * 100;
    let cumulative = 0;
    for (let seg of list) {
      cumulative += seg.chance;
      if (rand <= cumulative) {
        return seg;
      }
    }
    return list[list.length - 1];
  }

  // –í–µ—Ä–Ω—É—Ç—å —É–≥–æ–ª, —á—Ç–æ–±—ã —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ –≤—Å–µ–≥–¥–∞ –ø–æ–ø–∞–¥–∞–ª –Ω–∞ –≤—ã–∏–≥—Ä–∞–Ω–Ω—ã–π –ø—Ä–∏–∑
  function getTargetAngleForPrize(currentCost, prize) {
    const segments = chances[currentCost];
    let segmentIdx = getSegmentIndexByPrize(segments, prize);
    if (segmentIdx === -1) segmentIdx = 0;
    let angleAcc = 0;
    for (let i = 0; i < segmentIdx; ++i) {
      angleAcc += (segments[i].chance / 100) * 2 * Math.PI;
    }
    const segAngle = (segments[segmentIdx].chance / 100) * 2 * Math.PI;
    let centerOfSegment = angleAcc + segAngle / 2;
    let targetAngle = 1.5 * Math.PI - centerOfSegment;
    while (targetAngle < 0) targetAngle += 2 * Math.PI;
    while (targetAngle >= 2 * Math.PI) targetAngle -= 2 * Math.PI;
    return targetAngle;
  }

  function animateSpin(targetAngle, highlightIdx, duration = 4000) {
    spinning = true;
    updateButtonsState();

    let start = null;
    let startAngleAnim = currentAngle % (2 * Math.PI);
    if (startAngleAnim < 0) startAngleAnim += 2 * Math.PI;
    let diffAngle = targetAngle - startAngleAnim + (4 * 2 * Math.PI);

    function step(timestamp) {
      if (!start) start = timestamp;
      let elapsed = timestamp - start;
      let progress = Math.min(elapsed / duration, 1);
      let eased = 1 - Math.pow(1 - progress, 3);
      currentAngle = startAngleAnim + diffAngle * eased;
      drawWheel(highlightIdx);
      if (progress < 1) {
        requestAnimationFrame(step);
      } else {
        currentAngle = targetAngle;
        spinning = false;
        updateButtonsState();
        drawWheel(highlightIdx);
        showPrize();
      }
    }
    requestAnimationFrame(step);
  }

  function showPrize() {
    if (!currentPrize) return;
    if (currentPrize.price === 0) {
      prizeInfo.textContent = `–£–≤—ã, –ø—É—Å—Ç–∞—è —è—á–µ–π–∫–∞. –ù–∏—á–µ–≥–æ –Ω–µ –≤—ã–∏–≥—Ä–∞–ª–∏.`;
      currentPrize = null;
    } else {
      prizeInfo.textContent = `–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏: ${currentPrize.name}! (–¶–µ–Ω–∞: ${currentPrize.price}‚≠ê)`;
      inventory.push(currentPrize);
    }
    updateInventory();
    updateInventoryCount();
    updateButtonsState();
  }

  luckButtons.forEach(btn => {
    btn.addEventListener("click", () => {
      if (spinning) return;
      luckButtons.forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      currentCost = +btn.dataset.cost;
      currentPrize = null;
      prizeInfo.textContent = "";
      spinAgainBtn.disabled = true;
      sellPrizeBtn.disabled = true;
      updateButtonsState();
      drawWheel();
    });
  });

  spinBtn.addEventListener("click", () => {
    if (spinning || !currentCost) return;
    if (balance < currentCost) {
      alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–∞–Ω—Å–∞ –¥–ª—è —Å—Ç–∞–≤–∫–∏!");
      return;
    }
    balance -= currentCost;
    updateBalanceUI();
    currentPrize = selectPrize();
    const segments = chances[currentCost];
    let prizeIdx = getSegmentIndexByPrize(segments, currentPrize);
    let targetAngle = getTargetAngleForPrize(currentCost, currentPrize);
    animateSpin(targetAngle, prizeIdx);
  });

  spinAgainBtn.addEventListener("click", () => {
    if (spinning || !currentCost || balance < currentCost) return;
    currentPrize = null;
    prizeInfo.textContent = "";
    balance -= currentCost;
    updateBalanceUI();
    currentPrize = selectPrize();
    const segments = chances[currentCost];
    let prizeIdx = getSegmentIndexByPrize(segments, currentPrize);
    let targetAngle = getTargetAngleForPrize(currentCost, currentPrize);
    animateSpin(targetAngle, prizeIdx);
  });

  sellPrizeBtn.addEventListener("click", () => {
    if (!currentPrize) return;
    balance += currentPrize.price;
    updateBalanceUI();
    prizeInfo.textContent = `–í—ã –ø—Ä–æ–¥–∞–ª–∏ ${currentPrize.name} –∑–∞ ${currentPrize.price}‚≠ê`;
    currentPrize = null;
    spinAgainBtn.disabled = true;
    sellPrizeBtn.disabled = true;
    updateButtonsState();
    updateInventory();
    updateInventoryCount();
  });

  // –ö–Ω–æ–ø–∫–∞ +1000 –∑–≤–µ–∑–¥ (—Ç–æ–ª—å–∫–æ –¥–ª—è –Ω—É–∂–Ω–æ–≥–æ ID)
  document.getElementById("addStarsBtn").onclick = function () {
    balance += 1000;
    updateBalanceUI();
    updateProfile();
  };

  // --- –¢–∞–±–ª–∏—Ü–∞ —à–∞–Ω—Å–æ–≤ ---
  function renderChanceTables() {
    let html = '';
    [25, 50, 100].forEach(cost => {
      html += `<div style="margin-bottom:9px;"><b>–°—Ç–∞–≤–∫–∞ ${cost} ‚≠ê</b><table class="chance-table"><tr><th>–ü—Ä–∏–∑</th><th>–®–∞–Ω—Å %</th><th>–¶–µ–Ω–∞</th></tr>`;
      chances[cost].forEach(item => {
        html += `<tr><td>${item.name}</td><td>${item.chance}</td><td>${item.price ? item.price + " ‚≠ê" : "-"}</td></tr>`;
      });
      html += `</table></div>`;
    });
    document.getElementById('chanceTables').innerHTML = html;
  }

  // --- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ---
  updateBalanceUI();
  updateButtonsState();
  drawWheel();
  showScreen('roulette');
  updateInventory();
  updateInventoryCount();
  renderChanceTables();
</script>
</body>
</html>
